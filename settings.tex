% !TEX root = MainDocument.tex
% PrÃ¤ambel to define the Document Settings
% ---------------------------------------------------------------------------------------
% Define the Document Class - Do not change, except BCOR
\documentclass[%
	a4paper,%            	A4 paper
	12pt,%        		 	font size
	parskip = half,% 	          	for a line break with empty line
	bibliography=totoc,%	add the bibliography to the table of contents
	toc=listof,%   	     	add list of tables and figures to the table of contents
	listof=entryprefix,% 	adds the prefix (Table, Figure, Tabelle, Abbildung) to lists
	numbers=noenddot,%   	no dot at the end of heading numbers (see the comment below)
	BCOR=0.8cm,%           	binding correction
	DIV=11,%             	division of height and width of the document
]{scrartcl}

% ---------------------------------------------------------------------------------------
% line space manipulation 
\usepackage[onehalfspacing]{setspace}
\setstretch{1.3}				% set setspace of about 1.3

\usepackage{enumitem}
\setlist[enumerate]{itemsep=0mm} % Reduce line spacing for enumeration bullet points

% ---------------------------------------------------------------------------------------
% set the hyphenation for certain words
\hyphenation{op-tic-al net-works semi-con-duc-tor}
% ---------------------------------------------------------------------------------------
% Input Encoding
\usepackage[utf8]{inputenc}
% ---------------------------------------------------------------------------------------
% Output Font Encoding
\usepackage[T1]{fontenc}
%\usepackage{mathptmx} % Font like TimesNewRoman (suppresses "\bm" for bold greek letters--> looks miserable)
\usepackage{newtxtext} % Font like TimesNewRoman
\usepackage{newtxmath} % Font like TimesNewRoman in math mode allowing bold greek letters
\addtokomafont{sectioning}{\rmfamily}% serifed font for all headings
% ---------------------------------------------------------------------------------------
% Language Package
\usepackage[ngerman]{babel}% German package
%\tagged{english} {\usepackage[english]{babel}}% English package
% ---------------------------------------------------------------------------------------
% Microtypographical Improvements
\usepackage{microtype}
% ---------------------------------------------------------------------------------------
% Cross-referencing - produce hypertext links in the document
\usepackage[hidelinks]{hyperref}
\urlstyle{same}
% ---------------------------------------------------------------------------------------
% Citations
%\usepackage{cite}
%\def\citepunct{], [} % splitting multi citations 
%\def\citedash{]--[}
% ---------------------------------------------------------------------------------------
% Math
\usepackage{amsmath} % use only when font mathptmx is used
%\usepackage{amssymb} % use only when font mathptmx is used
\usepackage[low-sup]{subdepth} % needed to set subscript at correct depth
%
% Non-italic Greek letters
\usepackage{textgreek}
\makeatletter
\DeclareRobustCommand{\cpi}{%
  \textnormal{%
    \ifnum\pdf@strcmp{\math@version}{bold}=\z@\bfseries\fi
    \textpi
  }%
}
\makeatother
\usepackage{upgreek}

\renewcommand{\Re}{\operatorname{Re}} % make real part look corrct as non-italic
\renewcommand{\Im}{\operatorname{Im}}

% ---------------------------------------------------------------------------------------
% Comprehensive units package 
\usepackage{siunitx}
\sisetup{per-mode=symbol-or-fraction}
%\sisetup{locale = DE}	% if german - set correct separator (1,000 instead of 1.000)
% ---------------------------------------------------------------------------------------
% Figures
\usepackage{graphicx}
\graphicspath{{Figures/}}% Default path for figures
%
\usepackage[caption=false,font=footnotesize]{subfig}% package for subfigures in one figure
%
% Vector Graphics
\usepackage{color}
\usepackage[ usenames,dvipsnames]{xcolor}
\definecolor{me_green}{RGB}{61, 182, 15}
% \usepackage{transparent}
%\usepackage{epstopdf}
%
% Inserting the Task-Sheet
\usepackage{pdfpages}
%
% sets float environments after their first  reference in text as long the environment is close to the reference in the code
\usepackage{flafter} 
% ---------------------------------------------------------------------------------------
% Tables
\usepackage{array}% Enhanced Options for Tables and Arrays
\usepackage{booktabs}% For nicer table rules - use the commands toprule, midrule/cmidrule, bottomrule
\usepackage{longtable}% For Tables that are larger than one page to define repeatable headers and footers

\renewcommand{\arraystretch}{1.1}% enlarge row height in tables
%
% Change Table and Figure Caption - Corresponding to Word Template (11 pt and bold label)
% ?? Footnote in Tabellen ??
\usepackage{caption}%
\captionsetup{font={small}}% 
\captionsetup{labelfont={small,bf}}%
% Package for Tabstops
% Used to align Supervisor and Examiner on Title Page
\usepackage{tabto}%
% ---------------------------------------------------------------------------------------
% Quotes
\let\oldquote\quote
\let\endoldquote\endquote
\renewenvironment{quote}[2][]
 {\if\relax\detokenize{#1}\relax
    \def\quoteauthor{#2}%
  \else
    \def\quoteauthor{#2~---~#1}%
  \fi
  \oldquote}
 {\par\nobreak\smallskip\hfill(\quoteauthor)%
  \endoldquote\addvspace{\bigskipamount}}
% ---------------------------------------------------------------------------------------
% package for a notation/nomenclature
\usepackage[norefpage]{nomencl}
\usepackage{newmencl} % package allowing columns in nomenclature
\makenomenclature
% ---------------------------------------------------------------------------------------
% package for a acronyms /abbreviations
\usepackage[footnote,printonlyused,withpage]{acronym}
% ---------------------------------------------------------------------------------------
% Prevents Widows and Orphans
\clubpenalty=100
\widowpenalty=400
% ---------------------------------------------------------------------------------------
% Define Page Styles
\usepackage[manualmark,headsepline]{scrlayer-scrpage}
% Standard Page Style
\clearpairofpagestyles
\automark{section}
\ihead{\leftmark}
\ohead{\includegraphics[width=0.15\textwidth]{Figures/Murrelektronik.svg.png}}
\ofoot{\pagemark}
%\renewcommand*\chapterpagestyle{scrheadings}
%
\newpairofpagestyles{firstPage}{
  \ihead{}
  \ohead{\includegraphics[width=0.15\textwidth]{Figures/Murrelektronik.svg.png}}
  \ofoot{\pagemark}
  }
% ---------------------------------------------------------------------------------------
% counter captions - new counter per section 
\usepackage{chngcntr}
\counterwithin{figure}{section}
\counterwithin{equation}{section}
% ---------------------------------------------------------------------------------------
% additional Verbatim environment - more options like in verbatim
\usepackage{fancyvrb}
% ---------------------------------------------------------------------------------------
% Make wrapped graphics in Latex
\usepackage{wrapfig}
% Make pictures forcable locations
\usepackage{float}
% ---------------------------------------------------------------------------------------
% include Biblatex for better citing
\usepackage{csquotes}
\usepackage[
backend=biber,
citestyle=verbose,
style=ieee,
sorting=ynt
]{biblatex}
\addbibresource{t2000.bib}
% ---------------------------------------------------------------------------------------
% better references
\usepackage[ngerman]{cleveref}
% ---------------------------------------------------------------------------------------
\usepackage{listings}
% \usepackage{xcolor}

% \definecolor{codegreen}{rgb}{0,0.6,0}
% \definecolor{codegray}{rgb}{0.5,0.5,0.5}
% \definecolor{codepurple}{rgb}{0.58,0,0.82}
% \definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    % backgroundcolor=\color{backcolour},   
    % commentstyle=\color{codegreen},
    % keywordstyle=\color{magenta},
    % numberstyle=\tiny\color{codegray},
    % stringstyle=\color{codepurple},
    language=C++,
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% ---------------------------------------------------------------------------------------
% Better tabelling ant timelining
\usepackage{charter}
\usepackage{environ}
\usepackage{tikz}
\usetikzlibrary{calc,matrix}

\makeatletter
\let\matamp=&
\catcode`\&=13
\makeatletter
\def&{\iftikz@is@matrix
  \pgfmatrixnextcell
  \else
  \matamp
  \fi}
\makeatother

\newcounter{lines}
\def\endlr{\stepcounter{lines}\\}

\newcounter{vtml}
\setcounter{vtml}{0}

\newif\ifvtimelinetitle
\newif\ifvtimebottomline
\tikzset{description/.style={
  column 2/.append style={#1}
 },
 timeline color/.store in=\vtmlcolor,
 timeline color=red!80!black,
 timeline color st/.style={fill=\vtmlcolor,draw=\vtmlcolor},
 use timeline header/.is if=vtimelinetitle,
 use timeline header=false,
 add bottom line/.is if=vtimebottomline,
 add bottom line=false,
 timeline title/.store in=\vtimelinetitle,
 timeline title={},
 line offset/.store in=\lineoffset,
 line offset=4pt,
}

\NewEnviron{vtimeline}[1][]{%
\setcounter{lines}{1}%
\stepcounter{vtml}%
\begin{tikzpicture}[column 1/.style={anchor=east},
 column 2/.style={anchor=west},
 text depth=1pt,text height=1ex,
 row sep=1ex,
 column sep=1em,
 #1
]
\matrix(vtimeline\thevtml)[matrix of nodes]{\BODY};
\pgfmathtruncatemacro\endmtx{\thelines-1}
\path[timeline color st] 
($(vtimeline\thevtml-1-1.north east)!0.5!(vtimeline\thevtml-1-2.north west)$)--
($(vtimeline\thevtml-\endmtx-1.south east)!0.5!(vtimeline\thevtml-\endmtx-2.south west)$);
\foreach \x in {1,...,\endmtx}{
 \node[circle,timeline color st, inner sep=0.15pt, draw=white, thick] 
 (vtimeline\thevtml-c-\x) at 
 ($(vtimeline\thevtml-\x-1.east)!0.5!(vtimeline\thevtml-\x-2.west)$){};
 \draw[timeline color st](vtimeline\thevtml-c-\x.west)--++(-3pt,0);
 }
 \ifvtimelinetitle%
  \draw[timeline color st]([yshift=\lineoffset]vtimeline\thevtml.north west)--
  ([yshift=\lineoffset]vtimeline\thevtml.north east);
  \node[anchor=west,yshift=16pt,font=\large]
   at (vtimeline\thevtml-1-1.north west) 
   {\textsc{Timeline \thevtml}: \textit{\vtimelinetitle}};
 \else%
  \relax%
 \fi%
 \ifvtimebottomline%
   \draw[timeline color st]([yshift=-\lineoffset]vtimeline\thevtml.south west)--
  ([yshift=-\lineoffset]vtimeline\thevtml.south east);
 \else%
   \relax%
 \fi%
\end{tikzpicture}
}

% ---------------------------------------------------------------------------------------
% new commands
% Graphic Citing -> Writes "Quelle" in small footnotesize
\newcommand*{\quelle}[1]{\par\raggedleft\footnotesize Quelle:~#1}
